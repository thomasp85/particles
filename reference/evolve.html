<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1.0"><title>Move the simulation forward one or more steps — evolve • particles</title><!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous"><script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css"><script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet"><script src="../pkgdown.js"></script><meta property="og:title" content="Move the simulation forward one or more steps — evolve"><meta property="og:description" content="This is the function that move the simulation forward in time. It is possible
to either specify the number of steps that should be simulated or let the
simulation terminate as alpha_min is reached. Note that some values of
alpha and alpha_target does not allow alpha to converge to alpha_min so
letting the simulation self-terminate can result in an infinite loop. The
default settings will result in alpha_min being reached in 300 generations."><meta property="og:image" content="/logo.png"><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body data-spy="scroll" data-target="#toc">


    <div class="container template-reference-topic">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">particles</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">0.2.3.9000</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav"><li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu"><li>
      <a href="../articles/intro.html">Introduction to Particles</a>
    </li>
  </ul></li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul><ul class="nav navbar-nav navbar-right"><li>
  <a href="https://github.com/thomasp85/particles/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul></div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header">
    <h1>Move the simulation forward one or more steps</h1>
    <small class="dont-index">Source: <a href="https://github.com/thomasp85/particles/blob/main/R/evolve.R" class="external-link"><code>R/evolve.R</code></a></small>
    <div class="hidden name"><code>evolve.Rd</code></div>
    </div>

    <div class="ref-description">
    <p>This is the function that move the simulation forward in time. It is possible
to either specify the number of steps that should be simulated or let the
simulation terminate as <code>alpha_min</code> is reached. Note that some values of
<code>alpha</code> and <code>alpha_target</code> does not allow alpha to converge to <code>alpha_min</code> so
letting the simulation self-terminate can result in an infinite loop. The
default settings will result in <code>alpha_min</code> being reached in 300 generations.</p>
    </div>

    <div id="ref-usage">
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">evolve</span><span class="op">(</span><span class="va">simulation</span>, steps <span class="op">=</span> <span class="cn">NULL</span>, on_generation <span class="op">=</span> <span class="cn">NULL</span>, <span class="va">...</span><span class="op">)</span></span></code></pre></div>
    </div>

    <div id="arguments">
    <h2>Arguments</h2>


<dl><dt id="arg-simulation">simulation<a class="anchor" aria-label="anchor" href="#arg-simulation"></a></dt>
<dd><p>A simulation object</p></dd>


<dt id="arg-steps">steps<a class="anchor" aria-label="anchor" href="#arg-steps"></a></dt>
<dd><p>The number of generations to progress or a function getting the
simulation object and returns <code>TRUE</code> if the simulation should proceed and
<code>FALSE</code> if it should stop. If <code>NULL</code> the simulation will run until
<code>alpha_min</code> has been reached.</p></dd>


<dt id="arg-on-generation">on_generation<a class="anchor" aria-label="anchor" href="#arg-on-generation"></a></dt>
<dd><p>A function to be called after each generation has been
progressed. The function will get the current state of the simulation as the
first argument. If the function returns a simulation object it will replace
the current simulation from the next generation. In the case of any other
return type the return will be discarded and the function will have no effect
outside its side-effects.</p></dd>


<dt id="arg--">...<a class="anchor" aria-label="anchor" href="#arg--"></a></dt>
<dd><p>Additional arguments to <code>on_generation</code></p></dd>

</dl></div>
    <div id="value">
    <h2>Value</h2>
    <p>A simulation object with updated positions and velocities</p>
    </div>
    <div id="details">
    <h2>Details</h2>
    <p>Each generation in the simulation progress in the following manner:</p><ol><li><p>Check whether the specified number of generations has been reached</p></li>
<li><p>Check whether <code>alpha_min</code> has been reached</p></li>
<li><p>If either 1. or 2. is true, terminate the simulation</p></li>
<li><p>Apply the forces on the current particle positions and velocities in the
order they have been added</p></li>
<li><p>Reduce the velocity according to the given <code>velocity_decay</code></p></li>
<li><p>Update the position and velocity based on any provided constraints</p></li>
<li><p>Calculate the new particle positions based on the new velocity</p></li>
<li><p>If given, call the <code>on_generation</code> function.</p></li>
</ol></div>

    <div id="ref-examples">
    <h2>Examples</h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="va">graph</span> <span class="op">&lt;-</span> <span class="fu">tidygraph</span><span class="fu">::</span><span class="fu"><a href="https://tidygraph.data-imaginist.com/reference/create_graphs.html" class="external-link">create_notable</a></span><span class="op">(</span><span class="st">'folkman'</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="va">sim</span> <span class="op">&lt;-</span> <span class="va">graph</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="simulate.html">simulate</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="wield.html">wield</a></span><span class="op">(</span><span class="va">link_force</span><span class="op">)</span> <span class="op">|&gt;</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="wield.html">wield</a></span><span class="op">(</span><span class="va">manybody_force</span><span class="op">)</span></span></span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Take 5 steps and tell about it</span></span></span>
<span class="r-in"><span><span class="va">sim</span> <span class="op">|&gt;</span> <span class="fu">evolve</span><span class="op">(</span><span class="fl">5</span>, <span class="kw">function</span><span class="op">(</span><span class="va">sim</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span>  <span class="fu"><a href="https://rdrr.io/r/base/cat.html" class="external-link">cat</a></span><span class="op">(</span><span class="st">'Generation: '</span>, <span class="fu"><a href="simulate.html">evolutions</a></span><span class="op">(</span><span class="va">sim</span><span class="op">)</span>, <span class="st">'\n'</span>, sep <span class="op">=</span> <span class="st">''</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Generation: 1</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Generation: 2</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Generation: 3</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Generation: 4</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> Generation: 5</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A particle simulation:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * 20 particles</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * 2 Forces</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - link_force</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - manybody_force</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * 0 Constraints</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * 5 Evolutions</span>
<span class="r-in"><span></span></span>
<span class="r-in"><span><span class="co"># Run evolution until alpha_min is reached</span></span></span>
<span class="r-in"><span><span class="va">sim</span> <span class="op">|&gt;</span> <span class="fu">evolve</span><span class="op">(</span><span class="cn">NULL</span><span class="op">)</span></span></span>
<span class="r-out co"><span class="r-pr">#&gt;</span> A particle simulation:</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * 20 particles</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * 2 Forces</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - link_force</span>
<span class="r-out co"><span class="r-pr">#&gt;</span>   - manybody_force</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * 0 Constraints</span>
<span class="r-out co"><span class="r-pr">#&gt;</span> * 300 Evolutions</span>
<span class="r-in"><span></span></span>
</code></pre></div>
    </div>
  </div>
  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">
    <nav id="toc" data-toggle="toc" class="sticky-top"><h2 data-toc-skip>Contents</h2>
    </nav></div>
</div>


      <footer><div class="copyright">
  <p></p><p>Developed by Thomas Lin Pedersen.</p>
</div>

<div class="pkgdown">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

      </footer></div>






  </body></html>

